<div class="card mb-5 ">
    <!-- card header -->

    <!-- <div class="card-header pt-0 hh-50px align-items-center ">

        <h3 class="card-title flex-column ">
            <span class="card-label fw-bold text-gray-800">Vendors</span>
        </h3>

    </div> -->
    <!-- card header -->
    <div class="card-body py-3">
        <div class="card-toolbar my-0">
            <div class="d-flex align-items-center justify-content-between my-3">
                <div aria-role-check="yes" *ngIf="addVendorCondition() && checkPermission(permissionEnum.DASHBOARD_VENDORS_ADD_VENDOR_BUTTON)">


                    <a (click)="openAddVendorModel('Vendors')" class="btn btn-sm btn-light-blue me-2"
                        title="Add vendor">
                        <!-- <span class="svg-icon "><svg width="22" height="22" viewBox="0 0 24 24" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <rect opacity="0.5" x="11.364" y="20.364" width="16" height="2" rx="1"
                                transform="rotate(-90 11.364 20.364)" fill="currentColor"></rect>
                            <rect x="4.36396" y="11.364" width="16" height="2" rx="1" fill="currentColor">
                            </rect>
                        </svg></span> -->
                        <!-- add-svg -->
                        <span [inlineSVG]="'./assets/media/svg/add.svg'" class="svg-icon m-0 "></span>
                        <!-- add-svg -->
                        Vendor</a>
                    <a (click)="openAddVendorModel('Suggested')" class="btn btn-sm btn-light-blue  me-2 my-3 my-sm-0"
                        title="Add suggested vendor">
                        <!-- <span class="svg-icon ">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <rect opacity="0.5" x="11.364" y="20.364" width="16" height="2" rx="1"
                                transform="rotate(-90 11.364 20.364)" fill="currentColor"></rect>
                            <rect x="4.36396" y="11.364" width="16" height="2" rx="1" fill="currentColor">
                            </rect>
                        </svg></span> -->
                        <!-- add-svg -->
                        <span [inlineSVG]="'./assets/media/svg/add.svg'" class="svg-icon m-0 "></span>
                        <!-- add-svg -->
                        Suggested Vendor</a>
                </div>
                <a  aria-role-check="yes" *ngIf="addVendorCondition() && checkPermission(permissionEnum.DASHBOARD_VENDORS_EXPORT_TO_EXCEL_VENDORS_BUTTON)" (click)="saveExcelHandler(grid)" class="btn btn-sm btn-light-blue me-0 btn-active-icon-white"
                    data-bs-toggle="modal" data-bs-target="#kt_modal_vertically-centered" title="Download Vendor List">
                    <!-- download-svg -->
                    <span [inlineSVG]="'./assets/media/svg/download.svg'" class="svg-icon m-0 "></span>
                    <!-- download-svg -->

                    <!-- <span class="svg-icon  m-0">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                            height="24px" viewBox="0 0 24 24" version="1.1">
                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                <rect x="0" y="0" width="24" height="24"></rect>
                                <path
                                    d="M2,13 C2,12.5 2.5,12 3,12 C3.5,12 4,12.5 4,13 C4,13.3333333 4,15 4,18 C4,19.1045695 4.8954305,20 6,20 L18,20 C19.1045695,20 20,19.1045695 20,18 L20,13 C20,12.4477153 20.4477153,12 21,12 C21.5522847,12 22,12.4477153 22,13 L22,18 C22,20.209139 20.209139,22 18,22 L6,22 C3.790861,22 2,20.209139 2,18 C2,15 2,13.3333333 2,13 Z"
                                    fill="currentcolor" fill-rule="nonzero" opacity="0.7"></path>
                                <rect fill="currentcolor" opacity="0.7"
                                    transform="translate(12.000000, 8.000000) rotate(-180.000000) translate(-12.000000, -8.000000) "
                                    x="11" y="1" width="2" height="14" rx="1"></rect>
                                <path
                                    d="M7.70710678,15.7071068 C7.31658249,16.0976311 6.68341751,16.0976311 6.29289322,15.7071068 C5.90236893,15.3165825 5.90236893,14.6834175 6.29289322,14.2928932 L11.2928932,9.29289322 C11.6689749,8.91681153 12.2736364,8.90091039 12.6689647,9.25670585 L17.6689647,13.7567059 C18.0794748,14.1261649 18.1127532,14.7584547 17.7432941,15.1689647 C17.3738351,15.5794748 16.7415453,15.6127532 16.3310353,15.2432941 L12.0362375,11.3779761 L7.70710678,15.7071068 Z"
                                    fill="currentcolor" fill-rule="nonzero"
                                    transform="translate(12.000004, 12.499999) rotate(-180.000000) translate(-12.000004, -12.499999) ">
                                </path>
                            </g>
                        </svg></span> -->

                    <!-- <span class="svg-icon svg-icon-muted "><svg width="20" height="20"
                            viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect opacity="0.3" width="12" height="2" rx="1"
                                transform="matrix(0 -1 -1 0 12.75 19.75)" fill="currentColor" />
                            <path
                                d="M12.0573 17.8813L13.5203 16.1256C13.9121 15.6554 14.6232 15.6232 15.056 16.056C15.4457 16.4457 15.4641 17.0716 15.0979 17.4836L12.4974 20.4092C12.0996 20.8567 11.4004 20.8567 11.0026 20.4092L8.40206 17.4836C8.0359 17.0716 8.0543 16.4457 8.44401 16.056C8.87683 15.6232 9.58785 15.6554 9.9797 16.1256L11.4427 17.8813C11.6026 18.0732 11.8974 18.0732 12.0573 17.8813Z"
                                fill="currentColor" />
                            <path opacity="0.3"
                                d="M18.75 15.75H17.75C17.1977 15.75 16.75 15.3023 16.75 14.75C16.75 14.1977 17.1977 13.75 17.75 13.75C18.3023 13.75 18.75 13.3023 18.75 12.75V5.75C18.75 5.19771 18.3023 4.75 17.75 4.75L5.75 4.75C5.19772 4.75 4.75 5.19771 4.75 5.75V12.75C4.75 13.3023 5.19771 13.75 5.75 13.75C6.30229 13.75 6.75 14.1977 6.75 14.75C6.75 15.3023 6.30229 15.75 5.75 15.75H4.75C3.64543 15.75 2.75 14.8546 2.75 13.75V4.75C2.75 3.64543 3.64543 2.75 4.75 2.75L18.75 2.75C19.8546 2.75 20.75 3.64543 20.75 4.75V13.75C20.75 14.8546 19.8546 15.75 18.75 15.75Z"
                                fill="currentColor" />
                        </svg>
                    </span> -->
                </a>
            </div>

        </div>
        <div class="">
            <div class="over-view-box">
                <div class="  p-0 cs-kendo-grid">


                    <kendo-grid #grid="kendoGrid" class="fixed-header" [loading]="loading"
                        [columnMenu]="{ filter: true ,sort : true  }" [groupable]="true" [data]="gridView"
                        [group]="state.group" [filter]="state.filter" [filterable]="false" [reorderable]="true"
                        [resizable]="true" [skip]="state.skip" [pageSize]="state.take" [pageable]="{
                        pageSizes:true,
                        info: true
                                    }" [sortable]="{
                allowUnsort: true,           mode: 'multiple' }" [sort]="state.sort"
                        (dataStateChange)="onStateChange($event)">

                        <!-- Kendo Default Loader -->
                        <ng-template *ngIf="loading">
                            <app-wonder-loader></app-wonder-loader>
                        </ng-template>
                        <!-- Kendo End Default Loader -->
                        <kendo-grid-column [filterable]="false" [sortable]="false" [columnMenu]="false" field="sno"
                            title="#" [width]="ExtraSmallColumnWidth"><ng-template kendoGridCellTemplate
                                let-rowIndex="rowIndex">
                                {{rowIndex+1}}</ng-template>
                        </kendo-grid-column>
                        <kendo-grid-column *ngIf="surrogateLoginCondition() && checkPermission(permissionEnum.DASHBOARD_VENDORS_SURROGATE_LOGIN_BUTTON)" [headerClass]="headerStyle" [filterable]="false"
                        [sortable]="false" [columnMenu]="false" field="" title="Proxy Login" [width]="130">
                        <ng-template kendoGridCellTemplate let-item let-action="login">
                            <ng-container>
                                <div container="body ">
                                    <div class="d-flex justify-content-center align-content-center">
<!-- <button class="badge badge-light-success badge-lg me-3" *ngIf="surrogateLoginCondition()" (click)="surrogateLogin(item)" >Login</button> -->
                                        <a href="#" aria-role-check="yes"  class="badge badge-light-success badge-lg me-3 text-success" *ngIf="surrogateLoginCondition()" (click)="surrogateLogin(item)">Login</a>
                                    </div>
                                </div>
                            </ng-container>
                        </ng-template>
                    </kendo-grid-column>
                        <kendo-grid-column *ngIf="RankAmountCondition()" [filterable]="false" [sortable]="false"
                            [columnMenu]="false" field="vendorRank" title="Rank" [width]="70">
                            <!-- <ng-template kendoGridCellTemplate
                                let-rowIndex="rowIndex">
                                L {{rowIndex+1}}</ng-template> -->
                        </kendo-grid-column>
                        <kendo-grid-column *ngIf="addVendorCondition() && deleteActionButton() && checkPermission(permissionEnum.DASHBOARD_VENDORS_KENDO_ACTION_COLUMN)" [headerClass]="headerStyle" [filterable]="false"
                            [sortable]="false" [columnMenu]="false" field="totalValue" title="Action" [width]="70">
                            <ng-template kendoGridCellTemplate let-item let-action="action">
                                <ng-container>
                                    <div container="body ">
                                        <div class="d-flex justify-content-center align-content-center">

                                            <button aria-role-check="yes" (click)="terminateModalConfirmation(item)" *ngIf="deleteActionButton() "
                                                class="btn btn-sm px-0 py-1 " type="button" data-bs-auto-close="outside"
                                                data-bs-placement="top" alt="Terminate Event" title="Remove Vendor">
                                                <!-- delete-svg -->
                                                <span [inlineSVG]="'./assets/media/svg/delete.svg'"
                                                    class="svg-icon text-primary m-0 "></span>
                                                <!-- delete-svg -->

                                            </button>
                                        </div>
                                    </div>
                                </ng-container>
                            </ng-template>
                        </kendo-grid-column>


                        <kendo-grid-column *ngIf="RankAmountCondition()" [headerClass]="headerStyle" field="totalAmount"
                            title="Amount" [width]="170"></kendo-grid-column>

                        <!-- <kendo-grid-column [headerClass]="headerStyle" field="prid" title="PR NO" [width]="columnWidth"></kendo-grid-column> -->

                        <kendo-grid-column [filterable]="true" field="vendorCode" [headerClass]="headerStyle"
                            title="Vendor Code" [width]="150">
                            <ng-template kendoGridCellTemplate let-item>
                                <ng-container>
                                    {{item.vendorCode}}
                                </ng-container>
                            </ng-template></kendo-grid-column>







                        <kendo-grid-column cell [headerClass]="headerStyle" field="vendorName" title="Vendor Name"
                            [width]="170"></kendo-grid-column>
                        <kendo-grid-column [headerClass]="headerStyle" field="country" title="Country"
                            [width]="120"></kendo-grid-column>
                        <kendo-grid-column [headerClass]="headerStyle" field="city" title="City"
                            [width]="120"></kendo-grid-column>
                        <kendo-grid-column [headerClass]="headerStyle" field="vendorName" title="Primary Contact Person"
                            [width]="220"></kendo-grid-column>
                        <kendo-grid-column [headerClass]="headerStyle" field="contactNo" title="Contact Detail"
                            [width]="150"></kendo-grid-column>
                        <kendo-grid-column [headerClass]="headerStyle" field="statusVendor" title="Status" [width]="80">
                        </kendo-grid-column>
                        <kendo-grid-column [headerClass]="headerStyle" field="vendorEmailUpdated" title="Email"
                            [width]="250">
                            <ng-template kendoGridCellTemplate let-dataItem>
                                <div class=" cursor-pointer color-secondary text-center" (click)="openAddVendorEmailPopup(dataItem.vendorId,dataItem.vendorEmail)" >
                                    {{dataItem.emailList[0]}}
                                </div>

                                <!-- <div ngbDropdown autoClose="'outside'" container="body">


                                    <div class="d-flex align-items-center btn btn-sm  pr-1 px-2 py-1" ngbDropdownToggle
                                        type="button" data-bs-auto-close="outside">
                                        <div>
                                            {{dataItem.emailList[0]}}
                                        </div>


                                    </div>
                                    <ul class="dropdown-menu" ngbDropdownMenu>
                                        <li *ngFor="let email of dataItem.emailList|slice:1; let i=index" ngbDropdownItem>
                                            <div>{{email}}</div>


                                        </li>


                                    </ul>
                                </div> -->
                            </ng-template>
                        </kendo-grid-column>
                        <kendo-grid-column field="rating" title="Overall Rating" [width]="170" filter="numeric">
                            <ng-template kendoGridCellTemplate let-dataItem>
                                <div ngbDropdown autoClose="'outside'" container="body">


                                    <div class="d-flex align-items-center justify-content-center btn btn-sm  pr-1 px-2 py-1"
                                        ngbDropdownToggle type="button" data-bs-auto-close="outside">
                                        <div>
                                            ({{dataItem.overAllRating}})
                                        </div>

                                        <app-rating [rating]="dataItem.overAllRating" class="ms-2"></app-rating>
                                    </div>
                                    <ul class="dropdown-menu" ngbDropdownMenu>
                                        <li ngbDropdownItem>
                                            <a class="dropdown-item pt-0 pb-0 mt-0 mb-0">
                                                <div class="d-flex align-items-center py-0 px-0 me-6 mb-1">
                                                    <label class="text-muted fw-bold me-3 fs-7 mt-1">Quality</label>
                                                    <app-rating [rating]="dataItem.qualityRating"></app-rating>
                                                </div>

                                            </a>
                                        </li>
                                        <li ngbDropdownItem>
                                            <a class="dropdown-item pt-0 pb-0 mt-0 mb-0">

                                                <div class="d-flex align-items-center py-0 px-0 me-6 mb-1">
                                                    <label class="text-muted fw-bold me-3 fs-7 mt-1">Delivery</label>
                                                    <app-rating [rating]="dataItem.deliveryRating"></app-rating>
                                                </div>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </ng-template>
                        </kendo-grid-column>

                        <!-- <kendo-grid-column [headerClass]="headerStyle" field="preparer" title="View Details"
                            [width]="LargeColumnWidth"></kendo-grid-column> -->
                        <kendo-grid-excel fileName="Vendors List.xlsx"></kendo-grid-excel>

                    </kendo-grid>
                </div>
            </div>


        </div>
    </div>
</div>
